<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Premium Wireless Headphones | LuxCart</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="index.html" class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.707 15.293C4.077 15.923 4.523 17 5.414 17H17M17 17C15.895 17 15 17.895 15 19C15 20.105 15.895 21 17 21C18.105 21 19 20.105 19 19C19 17.895 18.105 17 17 17ZM9 19C9 20.105 8.105 21 7 21C5.895 21 5 20.105 5 19C5 17.895 5.895 17 7 17C8.105 17 9 17.895 9 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          LuxCart
        </a>
        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Home</a></li>
          <li><a href="#" class="nav-link">Shop</a></li>
          <li><a href="#" class="nav-link">Collections</a></li>
          <li><a href="#" class="nav-link">About</a></li>
          <li><a href="login.html" class="nav-link">Account</a></li>
          <li>
            <a href="cart.html" class="nav-link cart-btn">
              <i class="fas fa-shopping-bag"></i>
              <span class="cart-count">0</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="product-page">
      <div class="product-gallery">
        <div class="thumbnail-list">
          <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Headphones" class="thumbnail active">
          <img src="https://images.unsplash.com/photo-1590658268037-6bf12165a8df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Headphones Side View" class="thumbnail">
          <img src="https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Headphones Detail" class="thumbnail">
          <img src="https://images.unsplash.com/photo-1545127398-5aae47194b22?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Headphones Case" class="thumbnail">
        </div>
        <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Premium Wireless Headphones" class="main-image">
      </div>

      <div class="product-details">
        <h1>Premium Wireless Headphones</h1>
        <div class="product-rating">
          <div class="stars">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
          </div>
          <span class="review-count">124 reviews</span>
          <a href="#reviews" class="text-link">See all reviews</a>
        </div>

        <div class="product-price-lg">$349.99</div>
        <div class="original-price-lg">$399.99</div>
        <div class="savings">You save $50.00 (12.5%)</div>

        <div class="product-description">
          <p>Experience industry-leading active noise cancellation with these premium wireless headphones. Engineered for discerning audiophiles, they deliver exceptional sound quality with deep bass and crystal-clear highs.</p>
          <ul class="feature-list">
            <li><i class="fas fa-check-circle"></i> Advanced noise cancellation technology</li>
            <li><i class="fas fa-check-circle"></i> 30-hour battery life with quick charge</li>
            <li><i class="fas fa-check-circle"></i> Premium materials and craftsmanship</li>
            <li><i class="fas fa-check-circle"></i> Built-in microphone with voice assistant</li>
            <li><i class="fas fa-check-circle"></i> Comfortable over-ear design</li>
          </ul>
        </div>

        <div class="product-options">
          <div class="option-group">
            <h4 class="option-title">Color</h4>
            <div class="color-options">
              <div class="color-option selected" style="background-color: #000000;" data-color="Black"></div>
              <div class="color-option" style="background-color: #3b82f6;" data-color="Blue"></div>
              <div class="color-option" style="background-color: #ef4444;" data-color="Red"></div>
            </div>
          </div>

          <div class="option-group">
            <h4 class="option-title">Size</h4>
            <div class="size-options">
              <div class="size-option selected">One Size</div>
            </div>
          </div>
        </div>

        <div class="quantity-selector">
          <button class="quantity-btn minus"><i class="fas fa-minus"></i></button>
          <input type="number" class="quantity-input" value="1" min="1">
          <button class="quantity-btn plus"><i class="fas fa-plus"></i></button>
        </div>

        <button class="btn btn-primary add-to-cart-btn" onclick="addToCart(1)">
          <i class="fas fa-shopping-bag"></i> Add to Cart
        </button>

        <div class="product-meta">
          <div class="meta-item">
            <span class="meta-label">SKU:</span>
            <span class="meta-value">HP-1001</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Category:</span>
            <span class="meta-value">Audio, Headphones</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Availability:</span>
            <span class="meta-value in-stock">In Stock (Ready to ship)</span>
          </div>
        </div>

        <div class="shipping-info">
          <i class="fas fa-truck"></i>
          <div>
            <strong>Free shipping</strong> on orders over $50. 
            <a href="#" class="text-link">Learn more</a>
          </div>
        </div>
      </div>
    </div>

    <section class="product-tabs">
      <div class="tabs-nav">
        <div class="tab-link active" data-tab="description">Description</div>
        <div class="tab-link" data-tab="specs">Specifications</div>
        <div class="tab-link" data-tab="reviews">Reviews (124)</div>
      </div>

      <div class="tabs-content">
        <div id="description" class="tab-pane active">
          <h3>Product Description</h3>
          <p>These premium wireless headphones represent the pinnacle of audio engineering, combining cutting-edge technology with luxurious comfort. The active noise cancellation system uses advanced algorithms to analyze and counter ambient noise, creating an immersive listening experience even in noisy environments.</p>
          
          <h4>Key Features</h4>
          <ul>
            <li><strong>Industry-Leading Noise Cancellation:</strong> Dual noise sensor technology adapts to your environment</li>
            <li><strong>Premium Sound Quality:</strong> Custom 40mm drivers deliver rich, detailed audio</li>
            <li><strong>All-Day Comfort:</strong> Memory foam ear cushions and adjustable headband</li>
            <li><strong>Smart Touch Controls:</strong> Intuitive gesture controls for music and calls</li>
            <li><strong>30-Hour Battery Life:</strong> With quick charge (5 min = 5 hours playback)</li>
          </ul>
          
          <h4>What's Included</h4>
          <ul>
            <li>Premium Wireless Headphones</li>
            <li>Carrying Case</li>
            <li>3.5mm Audio Cable</li>
            <li>USB-C Charging Cable</li>
            <li>Quick Start Guide</li>
          </ul>
        </div>

        <div id="specs" class="tab-pane">
          <h3>Technical Specifications</h3>
          <table class="specs-table">
            <tr>
              <th>Brand</th>
              <td>AudioPro</td>
            </tr>
            <tr>
              <th>Model</th>
              <td>NC-300</td>
            </tr>
            <tr>
              <th>Driver Type</th>
              <td>40mm dynamic</td>
            </tr>
            <tr>
              <th>Frequency Response</th>
              <td>4Hz-40kHz</td>
            </tr>
            <tr>
              <th>Bluetooth Version</th>
              <td>5.0</td>
            </tr>
            <tr>
              <th>Battery Life</th>
              <td>30 hours (ANC on), 38 hours (ANC off)</td>
            </tr>
            <tr>
              <th>Charging Time</th>
              <td>3 hours (full charge)</td>
            </tr>
            <tr>
              <th>Weight</th>
              <td>254g</td>
            </tr>
            <tr>
              <th>Warranty</th>
              <td>2 years limited</td>
            </tr>
          </table>
        </div>

        <div id="reviews" class="tab-pane">
          <h3>Customer Reviews</h3>
          <div class="review-summary">
            <div class="average-rating">
              <div class="rating-number">4.8</div>
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <div class="total-reviews">Based on 124 reviews</div>
            </div>
            <div class="rating-bars">
              <div class="rating-bar">
                <div class="star-count">5 <i class="fas fa-star"></i></div>
                <div class="bar-container">
                  <div class="bar" style="width: 80%;"></div>
                </div>
                <div class="percentage">80%</div>
              </div>
              <div class="rating-bar">
                <div class="star-count">4 <i class="fas fa-star"></i></div>
                <div class="bar-container">
                  <div class="bar" style="width: 15%;"></div>
                </div>
                <div class="percentage">15%</div>
              </div>
              <div class="rating-bar">
                <div class="star-count">3 <i class="fas fa-star"></i></div>
                <div class="bar-container">
                  <div class="bar" style="width: 3%;"></div>
                </div>
                <div class="percentage">3%</div>
              </div>
              <div class="rating-bar">
                <div class="star-count">2 <i class="fas fa-star"></i></div>
                <div class="bar-container">
                  <div class="bar" style="width: 1%;"></div>
                </div>
                <div class="percentage">1%</div>
              </div>
              <div class="rating-bar">
                <div class="star-count">1 <i class="fas fa-star"></i></div>
                <div class="bar-container">
                  <div class="bar" style="width: 1%;"></div>
                </div>
                <div class="percentage">1%</div>
              </div>
            </div>
          </div>

          <div class="review-list">
            <div class="review">
              <div class="review-header">
                <div class="review-author">Michael B.</div>
                <div class="review-date">October 15, 2023</div>
                <div class="review-rating">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                </div>
              </div>
              <h4 class="review-title">Exceptional sound quality</h4>
              <div class="review-content">
                <p>These headphones are worth every penny. The noise cancellation is incredible - I can't hear anything when they're on. The sound quality is crisp and clear with deep bass. The battery life is as advertised, and they're comfortable for long listening sessions.</p>
              </div>
            </div>

            <div class="review">
              <div class="review-header">
                <div class="review-author">Sarah K.</div>
                <div class="review-date">September 28, 2023</div>
                <div class="review-rating">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="far fa-star"></i>
                </div>
              </div>
              <h4 class="review-title">Great but could be more comfortable</h4>
              <div class="review-content">
                <p>The sound quality is amazing and the noise cancellation works perfectly on my commute. My only complaint is that after 3-4 hours of continuous use, my ears start to feel a bit warm. Otherwise they're fantastic headphones.</p>
              </div>
            </div>
          </div>

          <div class="review-form">
            <h4>Write a Review</h4>
            <form>
              <div class="form-group">
                <label for="review-name">Name</label>
                <input type="text" id="review-name" required>
              </div>
              <div class="form-group">
                <label for="review-email">Email</label>
                <input type="email" id="review-email" required>
              </div>
              <div class="form-group">
                <label>Rating</label>
                <div class="rating-input">
                  <i class="far fa-star" data-rating="1"></i>
                  <i class="far fa-star" data-rating="2"></i>
                  <i class="far fa-star" data-rating="3"></i>
                  <i class="far fa-star" data-rating="4"></i>
                  <i class="far fa-star" data-rating="5"></i>
                </div>
              </div>
              <div class="form-group">
                <label for="review-title">Review Title</label>
                <input type="text" id="review-title" required>
              </div>
              <div class="form-group">
                <label for="review-text">Your Review</label>
                <textarea id="review-text" rows="5" required></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Submit Review</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <section class="related-products">
      <h2>You May Also Like</h2>
      <div class="products-grid">
        <div class="product-card">
          <div class="product-image-container">
            <img src="https://images.unsplash.com/photo-1590658268037-6bf12165a8df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Wireless Earbuds" class="product-image">
          </div>
          <div class="product-info">
            <h3 class="product-title">Premium Wireless Earbuds</h3>
            <div class="product-price">
              <span class="current-price">$199.99</span>
              <span class="original-price">$249.99</span>
            </div>
            <div class="product-actions">
              <button class="btn btn-primary" onclick="addToCart(7)">Add to Cart</button>
              <a href="product.html?id=7" class="btn btn-outline">View Details</a>
            </div>
          </div>
        </div>
        <div class="product-card">
          <div class="product-image-container">
            <img src="https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Bluetooth Speaker" class="product-image">
          </div>
          <div class="product-info">
            <h3 class="product-title">Portable Bluetooth Speaker</h3>
            <div class="product-price">
              <span class="current-price">$129.99</span>
              <span class="original-price">$159.99</span>
            </div>
            <div class="product-actions">
              <button class="btn btn-primary" onclick="addToCart(8)">Add to Cart</button>
              <a href="product.html?id=8" class="btn btn-outline">View Details</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <!-- Same footer as index.html -->
  </footer>

  <script src="main.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', async function() {
  // 1. Load product data
  const productId = window.location.pathname.split('/').pop(); // Extract from URL
  try {
    const response = await fetch(`/api/products/${productId}`);
    if (!response.ok) throw new Error('Product not found');
    const product = await response.json();
    
    // 2. Render product
    document.querySelector('.product-name').textContent = product.name;
    document.querySelector('.product-price').textContent = `$${product.price}`;
    document.querySelector('.main-image').src = product.images[0];
    
    // 3. Keep your existing UI handlers
    setupProductInteractions(product);
    
  } catch (error) {
    console.error("Loading error:", error);
    document.querySelector('.product-container').innerHTML = `
      <div class="error">Product not available</div>
    `;
  }

  function setupProductInteractions(product) {
    // Your existing thumbnail/size/color/quantity handlers
    document.querySelectorAll('.thumbnail').forEach(thumb => {
      thumb.addEventListener('click', function() {
        document.querySelector('.main-image').src = this.src.replace('-thumb', '');
      });
    });

    // Enhanced "Add to Cart"
    document.querySelector('.add-to-cart').addEventListener('click', async function() {
      const size = document.querySelector('.size-option.selected')?.textContent;
      const quantity = parseInt(document.querySelector('.quantity-input').value);

      try {
        const response = await fetch('/api/cart', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`
          },
          body: JSON.stringify({
            productId,
            quantity,
            size
          })
        });
        
        if (!response.ok) throw new Error(await response.text());
        alert('Added to cart!');
      } catch (error) {
        alert('Please login first!');
        window.location.href = '/login.html';
      }
    });
  }
});
</script>
</body>
</html>